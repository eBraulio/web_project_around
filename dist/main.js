(()=>{"use strict";class e{constructor(e,t=validationConfig){this._popup=e.querySelector(".popup__edit"),this._config=t}_showError=(e,t,o,r,i)=>{const n=e.querySelector(`#${t.id}-error`);t.classList.add(r),n.textContent=o,n.classList.add(i)};_hideError=(e,t,o,r)=>{const i=e.querySelector(`#${t.id}-error`);t.classList.remove(o),i.classList.remove(r),i.textContent=""};_checkInputValidity=(e,t,o,r)=>{t.validity.valid?this._hideError(e,t,o,r):this._showError(e,t,t.validationMessage,o,r)};_hasInvalidInput=e=>e.some((e=>!e.validity.valid));_toggleButtonState=(e,t,o)=>{this._hasInvalidInput(e)?(t.classList.add(o),t.setAttribute("disabled",!0)):(t.classList.remove(o),t.removeAttribute("disabled"))};_setEventListeners=(e,t,o,r,i,n)=>{const l=Array.from(e.querySelectorAll(t)),p=e.querySelector(o);this._toggleButtonState(l,p,n),l.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(e,t,r,i),this._toggleButtonState(l,p,n)}))}))};enableValidation=()=>{Array.from(document.querySelectorAll(this._config.formSelector)).forEach((e=>{e.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners(e,this._config.inputSelector,this._config.submitButtonSelector,this._config.inputErrorClass,this._config.errorClass,this._config.inactiveButtonClass)}))};resetValidation=()=>{const e=Array.from(document.querySelectorAll(this._config.inputSelector)),t=Array.from(document.querySelectorAll(this._config.errorSelector));e.forEach((e=>{e.classList.remove(this._config.inputErrorClass)})),t.forEach((e=>{e.classList.remove(this._config.errorClass)}))}}class t{constructor(e,t){this._name=e.name,this._url=e.url,this._cardSelector=t}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".template__element").cloneNode(!0)}_setEventListeners(){this._popupImage=document.querySelector("#image-popup"),this._popupOverlay=document.querySelector(".popup__overlay"),this._element.addEventListener("click",(e=>{if(e.target.classList.contains("element__like-button")&&e.target.classList.toggle("element__like-button-active"),e.target.classList.contains("element__image")){this._showPopUpImage(this._popupImage,this._popupOverlay);const t=this._popupImage.querySelector(".popup__element-image");t.src=e.target.currentSrc,t.alt=e.target.alt,this._popupImage.querySelector(".popup__element-title").textContent=e.target.alt,document.addEventListener("keydown",this._closePopUpImageEscapeKey)}e.target.classList.contains("element__trash-icon")&&e.target.closest(".template__element").remove()}))}_showPopUpImage(e,t){e.classList.add("popup__opened"),t.classList.add("popup__overlay")}_closePopUpImageEscapeKey(e){this._popupImage=document.querySelector("#image-popup"),this._popupOverlay=document.querySelector(".popup__overlay"),"Escape"===e.key&&(this._popupImage.classList.remove("popup__opened"),this._popupOverlay.classList.remove("popup__overlay"))}generateCard(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".element__image").src=this._url,this._element.querySelector(".element__image").alt=this._name,this._element.querySelector(".element__text").textContent=this._name,this._element}}const o=document.querySelector(".profile__name"),r=document.querySelector(".profile__description"),i=document.querySelector("#popup-profile"),n=i.querySelector(".popup__input-name"),l=i.querySelector(".popup__input-description"),p=i.querySelector("#btn-submit-profile"),s=i.querySelector("#btn-close-profile"),a=document.querySelector(".profile__edit-button"),c=document.querySelector("#place-popup"),u=c.querySelector(".popup__add-name"),d=c.querySelector(".popup__add-adress"),_=document.querySelector(".profile__add-button"),m=c.querySelector("#btn-close-place"),f=c.querySelector("#btn-submit-place"),y=document.querySelector("#popup-overlay-edit"),h=document.querySelector("#popup-overlay-add"),v=document.querySelector("#popup-overlay-image"),S=document.querySelector("#image-popup");function q(e,t){e.classList.add("popup__opened"),t.classList.add("popup__overlay"),document.addEventListener("keydown",x)}function g(e,t){e.classList.remove("popup__opened"),t.classList.remove("popup__overlay"),document.removeEventListener("keydown",x)}function b(e,t){e.classList.remove("popup__opened"),document.removeEventListener("keydown",x)}function L(){g(i,y),g(c,h),b(S)}function x(e){"Escape"===e.key&&L()}a.addEventListener("click",(()=>{q(i,y),n.value=document.querySelector(".profile__name").textContent,l.value=document.querySelector(".profile__description").textContent})),s.addEventListener("click",(()=>{g(i,y)})),p.addEventListener("click",(()=>{var e,t;e=n.value,t=l.value,o.textContent=e,r.textContent=t,g(i,y)})),_.addEventListener("click",(()=>{q(c,h),u.value="",d.value="",f.classList.add("popup__button-disabled")})),m.addEventListener("click",(()=>{g(c,h),f.classList.add("popup__button-disabled")})),S.addEventListener("click",(e=>{e.target.classList.contains("popup__close-image")&&b(S)})),v.addEventListener("click",L),h.addEventListener("click",L),y.addEventListener("click",L),console.log("Hello, World!"),document.querySelector(".profile__name"),document.querySelector(".profile__description");const w=document.querySelector("#popup-profile"),E=(w.querySelector(".popup__input-name"),w.querySelector(".popup__input-description"),w.querySelector("#btn-submit-profile"),w.querySelector("#btn-close-profile"),document.querySelector(".profile__edit-button"),document.querySelector("#place-popup")),D=E.querySelector(".popup__add-name"),A=E.querySelector(".popup__add-adress"),C=(document.querySelector(".profile__add-button"),E.querySelector("#btn-close-place"),E.querySelector("#btn-submit-place")),k=(document.querySelector("#popup-overlay-edit"),document.querySelector("#popup-overlay-add")),H=(document.querySelector("#popup-overlay-image"),document.querySelector("#image-popup"),document.querySelector(".elements")),M={formSelector:".popup__edit",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__button-disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input_type_error",errorSelector:".popup__error"},B=[{name:"Detroit Downtown",url:"https://images.unsplash.com/photo-1573112067224-58060384abd5?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Estadio Ford",url:"https://images.unsplash.com/photo-1542385939-cac37e190818?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Desierto de Utah",url:"https://plus.unsplash.com/premium_photo-1697730073417-c32f239b5675?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Ayuntamiento de Pasadena, CA",url:"https://images.unsplash.com/photo-1690002122693-bea650f7bdf5?q=80&w=1976&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Hollywood",url:"https://images.unsplash.com/photo-1581390114939-946f9a890a7f?q=80&w=1931&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Chicago Downtown",url:"https://images.unsplash.com/photo-1581373449483-37449f962b6c?q=80&w=2069&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}];H.innerHTML="",B.forEach((e=>{const o=new t(e,"#template__elements",B).generateCard();H.prepend(o)})),new e(w,M).enableValidation(),new e(E,M).enableValidation(),C.addEventListener("click",(()=>{const e={name:D.value,url:A.value},o=new t(e,"#template__elements",B).generateCard();H.prepend(o),B.push(e),g(E,k)}))})();