!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var r=function(){return t=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e,this._link=n,this.open=r},(n=[{key:"_getTemplate",value:function(){return this._cardElement=document.querySelector("#template__elements").content.querySelector(".template__element").cloneNode(!0),this._cardElement}},{key:"_setProperties",value:function(){this._card=this._getTemplate(),this._cardImage=this._card.querySelector(".element__image"),this._cardImage.alt="Fotografia de ".concat(this._name),this._cardImage.src=this._link,this._cardTitle=this._card.querySelector(".element__text").textContent=this._name,this._buttonLikeCard=this._card.querySelector(".element__like-button"),this._buttonDeleteCard=this._card.querySelector(".element__trash-icon")}},{key:"_handleLikeBtn",value:function(){this._buttonLikeCard.classList.toggle("element__like-button-active")}},{key:"_handleDeleteBtn",value:function(){this._card.remove()}},{key:"handleCardClick",value:function(){this.open(this._cardTitle,this._cardImage.src)}},{key:"_setEventListeners",value:function(){var t=this;this._buttonLikeCard.addEventListener("click",(function(){t._handleLikeBtn()})),this._buttonDeleteCard.addEventListener("click",(function(){t._handleDeleteBtn()})),this._cardImage.addEventListener("click",(function(){t.handleCardClick()}))}},{key:"generateCard",value:function(){return this._setProperties(),this._setEventListeners(),this._card}}])&&e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function u(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}var a=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formElement=e,this._settings=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._submitButton=this._formElement.querySelector(this._settings.submitButtonSelector)},(e=[{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(t){t.preventDefault()})),this._setEventListeners()}},{key:"_setEventListeners",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?(this._submitButton.classList.add(this._settings.inactiveButtonClass),this._submitButton.setAttribute("disabled",!0)):(this._submitButton.classList.remove(this._settings.inactiveButtonClass),this._submitButton.removeAttribute("disabled"))}},{key:"_showInputError",value:function(t,e){this._errorElement=this._formElement.querySelector("#".concat(t.id,"-error")),this._errorElement.textContent=e,t.classList.add(this._settings.inputErrorClass),this._errorElement.classList.add(this._settings.errorClass)}},{key:"_hideInputError",value:function(t){this._errorElement=this._formElement.querySelector("#".concat(t.id,"-error")),this._errorElement.textContent="",t.classList.remove(this._settings.inputErrorClass),this._errorElement.classList.remove(this._settings.errorClass)}},{key:"resetValidation",value:function(){var t=this;this._inputList.forEach((function(e){t._hideInputError(e)})),this._toggleButtonState()}}])&&i(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:e+""}var f=function(){return t=function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderedItems=r,this._renderer=o,this._container=n},(e=[{key:"renderer",value:function(){var t=this;this._renderedItems.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(t){this._container.append(t)}}])&&c(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),p=document.querySelector(".elements"),y=(document.querySelector("#image-popup"),document.querySelector(".popup__close-image")),m=(document.querySelector("#btn-close-place"),document.querySelector(".profile__edit-button")),d=document.querySelector(".profile__add-button"),b=document.querySelectorAll(".popup__close-form"),h=Array.from(document.querySelectorAll(".popup__edit-form")),v=(document.querySelector("#btn-close-profile"),document.querySelector("#btn-submit-place"),document.querySelector("#popup__input-name")),_=document.querySelector("#popup__input-description"),w={formSelector:"#popup__edit-form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button-disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input_type_error"};function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,E(r.key),r)}}function E(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g(e)?e:e+""}var k=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupElement=document.querySelector(e),this._overlayEdit=document.querySelector("#popup-overlay-edit"),this._overlayAdd=document.querySelector("#popup-overlay-add"),this._overlayImage=document.querySelector("#popup-overlay-image")},(e=[{key:"open",value:function(){this._popupElement.classList.add("popup__opened"),this._overlayEdit.classList.add("popup__overlay-opened"),this._overlayAdd.classList.add("popup__overlay-opened"),this._overlayImage.classList.add("popup__overlay-opened")}},{key:"close",value:function(){this._popupElement.classList.remove("popup__opened"),this._overlayEdit.classList.remove("popup__overlay-opened"),this._overlayAdd.classList.remove("popup__overlay-opened"),this._overlayImage.classList.remove("popup__overlay-opened")}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._overlayEdit.addEventListener("click",(function(){t.close()})),this._overlayAdd.addEventListener("click",(function(){t.close()})),this._overlayImage.addEventListener("click",(function(){t.close()})),b.forEach((function(e){e.addEventListener("click",(function(){t.close()}))})),y.addEventListener("click",(function(){t.close()})),document.addEventListener("keydown",(function(e){t._handleEscClose(e)}))}}])&&S(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,x(r.key),r)}}function x(t){var e=function(t,e){if("object"!=j(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==j(e)?e:e+""}function P(t,e,n){return e=q(e),function(t,e){if(e&&("object"==j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,C()?Reflect.construct(e,n||[],q(t).constructor):e.apply(t,n))}function C(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(C=function(){return!!t})()}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=q(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},O.apply(null,arguments)}function q(t){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},q(t)}function D(t,e){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},D(t,e)}var B=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=P(this,e,[t])).handleFormSubmit=n,r._formElement=r._popupElement.querySelector(".popup__edit-form"),r._inputList=Array.from(r._formElement.querySelectorAll(".popup__input")),r._getInputValues=r._getInputValues.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D(t,e)}(e,t),n=e,(r=[{key:"_getInputValues",value:function(){var t=this;return this.formValues={},this._inputList.forEach((function(e){t.formValues[e.name]=e.value})),this.formValues}},{key:"close",value:function(){O(q(e.prototype),"close",this).call(this),this._formElement.reset()}},{key:"setEventListeners",value:function(){var t=this;O(q(e.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(e){e.preventDefault(),t.handleFormSubmit(t._getInputValues())}))}}])&&L(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(k);function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,V(r.key),r)}}function V(t){var e=function(t,e){if("object"!=I(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==I(e)?e:e+""}var T=function(){return t=function t(e){var n=e.user,r=e.job;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userName=document.querySelector(n),this._userAboutme=document.querySelector(r),this.userValues={name:"",aboutme:""}},(e=[{key:"getUserInfo",value:function(){return this.userValues.name=this._userName.textContent,this.userValues.aboutme=this._userAboutme.textContent,this.userValues}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.aboutme;this._userName.textContent=e,this._userAboutme.textContent=n}}])&&A(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G(r.key),r)}}function G(t){var e=function(t,e){if("object"!=H(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==H(e)?e:e+""}function R(t,e,n){return e=F(e),function(t,e){if(e&&("object"==H(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,W()?Reflect.construct(e,n||[],F(t).constructor):e.apply(t,n))}function W(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(W=function(){return!!t})()}function Y(){return Y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=F(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Y.apply(null,arguments)}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},F(t)}function U(t,e){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},U(t,e)}var N=new(function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=R(this,e,[t])).handleCardClick=n.open.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&U(t,e)}(e,t),n=e,(r=[{key:"open",value:function(t,n){this._showImage=document.querySelector(".popup__element-image"),this._showSubtitle=document.querySelector(".popup__element-title"),this._showImage.alt="Fotografia de ".concat(t),this._showImage.src=n,this._showSubtitle.textContent=t,Y(F(e.prototype),"open",this).call(this)}}])&&M(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(k))("#image-popup");N.setEventListeners();var z=new f({items:[{name:"Detroit Downtown",link:"https://images.unsplash.com/photo-1573112067224-58060384abd5?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Estadio Ford",link:"https://images.unsplash.com/photo-1542385939-cac37e190818?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Desierto de Utah",link:"https://plus.unsplash.com/premium_photo-1697730073417-c32f239b5675?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Ayuntamiento de Pasadena, CA",link:"https://images.unsplash.com/photo-1690002122693-bea650f7bdf5?q=80&w=1976&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Hollywood",link:"https://images.unsplash.com/photo-1581390114939-946f9a890a7f?q=80&w=1931&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Chicago Downtown",link:"https://images.unsplash.com/photo-1581373449483-37449f962b6c?q=80&w=2069&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}],renderer:function(t){var e=new r(t.name,t.link,N.handleCardClick).generateCard();z.addItem(e)}},p);function J(){h.forEach((function(t){new a(t,w).enableValidation()}))}function K(){h.forEach((function(t){new a(t,w).resetValidation()}))}function Q(){h.forEach((function(t){new a(t,w)._toggleButtonState()}))}z.renderer();var X=new T({user:".profile__name",job:".profile__description"}),Z=new B("#popup-profile",(function(t){X.setUserInfo({name:t.name,aboutme:t.aboutme}),Z.close()})),$=new B("#place-popup",(function(t){var e=new r(t.place,t.url,N.handleCardClick).generateCard();$.close(),p.prepend(e)}));m.addEventListener("click",(function(){Z.open(),J(),Q();var t=new T({user:".profile__name",job:".profile__description"}).getUserInfo();v.value=t.name,_.value=t.aboutme,K()})),d.addEventListener("click",(function(){$.open(),J(),Q(),K()})),Z.setEventListeners(),$.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUN6QjBJLEVBQU9HLE1BQ1BILEVBQU9JLElBQ1BwQixFQUFXdkgsaUJBRXNCOEgsZUFDbkNXLEVBQWU1QyxRQUNmZixFQUFrQjhELFFBQVFmLEVBQzVCLElBRUE3QyxFQUFjckQsaUJBQWlCLFNBQVMsV0FDdEMyRyxFQUFjakksT0FDZDJILElBQ0FJLElBQ0EsSUFLTWhCLEVBTFcsSUFBSUwsRUFBUyxDQUM1QkMsS0FBTSxpQkFDTkMsSUFBSywwQkFHcUI0QixjQUM1QnpELEVBQWM3RSxNQUFRNkcsRUFBV3RILEtBQ2pDdUYsRUFBaUI5RSxNQUFRNkcsRUFBV0MsUUFDcENhLEdBQ0YsSUFFQWpELEVBQWlCdEQsaUJBQWlCLFNBQVMsV0FDekM4RyxFQUFlcEksT0FDZjJILElBQ0FJLElBQ0FGLEdBQ0YsSUFFQUksRUFBY1gsb0JBQ2RjLEVBQWVkLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvcGFnZS9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IobmFtZSwgbGluaywgaGFuZGxlQ2FyZENsaWNrKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgdGhpcy5vcGVuID0gaGFuZGxlQ2FyZENsaWNrO1xuICB9XG4gIC8vRnVuY2nDs24gcGFyYSBjbG9uYXIgcGxhbnRpbGxhXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIiN0ZW1wbGF0ZV9fZWxlbWVudHNcIilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGVtcGxhdGVfX2VsZW1lbnRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBfc2V0UHJvcGVydGllcygpIHtcbiAgICB0aGlzLl9jYXJkID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IGBGb3RvZ3JhZmlhIGRlICR7dGhpcy5fbmFtZX1gO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190ZXh0XCIpLnRleHRDb250ZW50ID1cbiAgICAgIHRoaXMuX25hbWU7XG4gICAgdGhpcy5fYnV0dG9uTGlrZUNhcmQgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fYnV0dG9uRGVsZXRlQ2FyZCA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190cmFzaC1pY29uXCIpO1xuICB9XG5cbiAgX2hhbmRsZUxpa2VCdG4oKSB7XG4gICAgdGhpcy5fYnV0dG9uTGlrZUNhcmQuY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRfX2xpa2UtYnV0dG9uLWFjdGl2ZVwiKTtcbiAgfVxuICBfaGFuZGxlRGVsZXRlQnRuKCkge1xuICAgIHRoaXMuX2NhcmQucmVtb3ZlKCk7XG4gIH1cbiAgaGFuZGxlQ2FyZENsaWNrKCkge1xuICAgIHRoaXMub3Blbih0aGlzLl9jYXJkVGl0bGUsIHRoaXMuX2NhcmRJbWFnZS5zcmMpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2J1dHRvbkxpa2VDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQnRuKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fYnV0dG9uRGVsZXRlQ2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQnRuKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZUNhcmRDbGljaygpO1xuICAgIH0pO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX3NldFByb3BlcnRpZXMoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkO1xuICB9XG59XG4iLCIvL0NsYXNlIEZyb21WYWxpZGF0b3IgY29uIGNvbnN0cnVjdG9yIGNvbiBkb3MgcGFyw6FtZXRyb3NcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCwgc2V0dGluZ3MpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgfVxuICAvL23DqXRvZG8gcMO6YmxpY28gcXVlIGFjdGl2YSBsYSB2YWxpZGFjacOzbiBkZWwgZm9ybXVsYXJpb1xuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuICAvLyBtw6l0b2RvIHByaXZhZG8gcGFyYSBldmVudG9zXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIC8vIG3DqXRvZG8gcHJpdmFkbyBwYXJhIHByb2Nlc2FyIGVsIGZvcm11bGFyaW9cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuICAvLyBtw6l0b2RvIHByaXZhZG8gcGFyYSBwcm9jZXNhciBlbCBmb3JtdWxhcmlvXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG4gIC8vIG3DqXRvZG8gcHJpdmFkbyBwYXJhIGFjdGl2YXIgYm90b25lc1xuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTsgLy9Fdml0YSBzdWJpciBmb3JtIGNvbiBFbnRlciBjdWFuZG8gbG9zIGNhbXBvcyBubyBwYXNlbiBsYSB2YWxpZGFjacOzblxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTsgLy9QZXJtaXRlIHN1YmlyIGZvcm0gY3VhbmRvIGxvcyBjYW1wb3MgcGFzZW4gbGEgdmFsaWRhY2nDs25cbiAgICB9XG4gIH1cbiAgLy8gbcOpdG9kbyBwcml2YWRvIHBhcmEgcHJvY2VzYXIgZWwgZm9ybXVsYXJpb1xuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcbiAgfVxuICAvLyBtw6l0b2RvIHByaXZhZG8gcGFyYSBwcm9jZXNhciBlbCBmb3JtdWxhcmlvXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XG4gIH1cbiAgLy9tw6l0b2RvIHBhcmEgaGFjZXIgcmVzZXQgZGUgbGEgdmFsaWRhY2nDs24gZGVsIGZvcm11bGFyaW9cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNhcmRDb250YWluZXIpIHtcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBjYXJkQ29udGFpbmVyO1xuICB9XG5cbiAgcmVuZGVyZXIoKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIkRldHJvaXQgRG93bnRvd25cIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTczMTEyMDY3MjI0LTU4MDYwMzg0YWJkNT9xPTgwJnc9MTk3NCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiRXN0YWRpbyBGb3JkXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU0MjM4NTkzOS1jYWMzN2UxOTA4MTg/cT04MCZ3PTE5NzQmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkRlc2llcnRvIGRlIFV0YWhcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcGx1cy51bnNwbGFzaC5jb20vcHJlbWl1bV9waG90by0xNjk3NzMwMDczNDE3LWMzMmYyMzliNTY3NT9xPTgwJnc9MTk3NCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQXl1bnRhbWllbnRvIGRlIFBhc2FkZW5hLCBDQVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2OTAwMDIxMjI2OTMtYmVhNjUwZjdiZGY1P3E9ODAmdz0xOTc2JmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJIb2xseXdvb2RcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTgxMzkwMTE0OTM5LTk0NmY5YTg5MGE3Zj9xPTgwJnc9MTkzMSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQ2hpY2FnbyBEb3dudG93blwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODEzNzM0NDk0ODMtMzc0NDlmOTYyYjZjP3E9ODAmdz0yMDY5JmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuXTtcbmV4cG9ydCBjb25zdCBlbGVtZW50Q29udGFpbmRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNcIik7XG5leHBvcnQgY29uc3QgcG9wdXBPcGVuSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLXBvcHVwXCIpO1xuZXhwb3J0IGNvbnN0IGNsb3NlU2hvd0ltYWdlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2Nsb3NlLWltYWdlXCJcbik7XG5leHBvcnQgY29uc3QgY2xvc2VBZGRQbGFjZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYnRuLWNsb3NlLXBsYWNlXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgY2xvc2VGb3JtQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fY2xvc2UtZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2VkaXQtZm9ybVwiKVxuKTtcbmV4cG9ydCBjb25zdCBzYXZlUHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYnRuLWNsb3NlLXByb2ZpbGVcIik7IC8vXG5leHBvcnQgY29uc3QgYWRkSW1hZ2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2J0bi1zdWJtaXQtcGxhY2VcIik7IC8vXG5leHBvcnQgY29uc3QgZm9ybUlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXBfX2lucHV0LW5hbWVcIik7XG5leHBvcnQgY29uc3QgZm9ybUlucHV0QWJvdXRtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3BvcHVwX19pbnB1dC1kZXNjcmlwdGlvblwiXG4pO1xuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiI3BvcHVwX19lZGl0LWZvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbi1kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxufTtcbiIsImltcG9ydCB7IGNsb3NlRm9ybUJ1dHRvbiwgY2xvc2VTaG93SW1hZ2VCdXR0b24gfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX292ZXJsYXlFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1vdmVybGF5LWVkaXRcIik7XG4gICAgdGhpcy5fb3ZlcmxheUFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtb3ZlcmxheS1hZGRcIik7XG4gICAgdGhpcy5fb3ZlcmxheUltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1vdmVybGF5LWltYWdlXCIpO1xuICB9XG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9fb3BlbmVkXCIpO1xuICAgIHRoaXMuX292ZXJsYXlFZGl0LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9fb3ZlcmxheS1vcGVuZWRcIik7XG4gICAgdGhpcy5fb3ZlcmxheUFkZC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfX292ZXJsYXktb3BlbmVkXCIpO1xuICAgIHRoaXMuX292ZXJsYXlJbWFnZS5jbGFzc0xpc3QuYWRkKFwicG9wdXBfX292ZXJsYXktb3BlbmVkXCIpO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX29wZW5lZFwiKTtcbiAgICB0aGlzLl9vdmVybGF5RWRpdC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX292ZXJsYXktb3BlbmVkXCIpO1xuICAgIHRoaXMuX292ZXJsYXlBZGQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19vdmVybGF5LW9wZW5lZFwiKTtcbiAgICB0aGlzLl9vdmVybGF5SW1hZ2UuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19vdmVybGF5LW9wZW5lZFwiKTtcbiAgfVxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fb3ZlcmxheUVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9vdmVybGF5QWRkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fb3ZlcmxheUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gICAgLy9PcGNpb24gMVxuICAgIGNsb3NlRm9ybUJ1dHRvbi5mb3JFYWNoKChjbG9zZUJ1dHRvbikgPT4ge1xuICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgY2xvc2VTaG93SW1hZ2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZ0KSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZShldnQpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuaGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZWRpdC1mb3JtXCIpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKVxuICAgICk7XG4gICAgdGhpcy5fZ2V0SW5wdXRWYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcy5iaW5kKHRoaXMpO1xuICB9XG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLmZvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuZm9ybVZhbHVlcztcbiAgfVxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLmhhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyB1c2VyLCBqb2IgfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyKTtcbiAgICB0aGlzLl91c2VyQWJvdXRtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iKTtcbiAgICB0aGlzLnVzZXJWYWx1ZXMgPSB7IG5hbWU6IFwiXCIsIGFib3V0bWU6IFwiXCIgfTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHRoaXMudXNlclZhbHVlcy5uYW1lID0gdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQ7XG4gICAgdGhpcy51c2VyVmFsdWVzLmFib3V0bWUgPSB0aGlzLl91c2VyQWJvdXRtZS50ZXh0Q29udGVudDtcblxuICAgIHJldHVybiB0aGlzLnVzZXJWYWx1ZXM7XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0bWUgfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl91c2VyQWJvdXRtZS50ZXh0Q29udGVudCA9IGFib3V0bWU7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuaGFuZGxlQ2FyZENsaWNrID0gdGhpcy5vcGVuLmJpbmQodGhpcyk7XG4gIH1cbiAgb3BlbihuYW1lLCBsaW5rKSB7XG4gICAgdGhpcy5fc2hvd0ltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZWxlbWVudC1pbWFnZVwiKTtcbiAgICB0aGlzLl9zaG93U3VidGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19lbGVtZW50LXRpdGxlXCIpO1xuICAgIHRoaXMuX3Nob3dJbWFnZS5hbHQgPSBgRm90b2dyYWZpYSBkZSAke25hbWV9YDtcbiAgICB0aGlzLl9zaG93SW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9zaG93U3VidGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHtcbiAgaW5pdGlhbENhcmRzLFxuICBlbGVtZW50Q29udGFpbmRlcixcbiAgZm9ybUxpc3QsXG4gIHByb2ZpbGVCdXR0b24sXG4gIHByb2ZpbGVBZGRCdXR0b24sXG4gIHNldHRpbmdzLFxuICBmb3JtSW5wdXROYW1lLFxuICBmb3JtSW5wdXRBYm91dG1lLFxufSBmcm9tIFwiLi4vY29tcG9uZW50cy91dGlscy5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5cbmNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjaW1hZ2UtcG9wdXBcIik7XG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0ubmFtZSwgaXRlbS5saW5rLCBwb3B1cEltYWdlLmhhbmRsZUNhcmRDbGljayk7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG4gICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICB9LFxuICB9LFxuICBlbGVtZW50Q29udGFpbmRlclxuKTtcbmNhcmRMaXN0LnJlbmRlcmVyKCk7XG5cbmZ1bmN0aW9uIHZhbGlkYXRpb25Gb3JtKCkge1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IGZvcm1zVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUVsZW1lbnQsIHNldHRpbmdzKTtcbiAgICBmb3Jtc1ZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIH0pO1xufVxuZnVuY3Rpb24gcmVzZXRWYWxpZGF0aW9uRm9ybSgpIHtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBmb3Jtc1ZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1FbGVtZW50LCBzZXR0aW5ncyk7XG4gICAgZm9ybXNWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIH0pO1xufVxuZnVuY3Rpb24gdG9nZ2xlQnV0dG9uRm9ybSgpIHtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB0b2dnbGVCdXR0b24gPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtRWxlbWVudCwgc2V0dGluZ3MpO1xuICAgIHRvZ2dsZUJ1dHRvbi5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgfSk7XG59XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlcjogXCIucHJvZmlsZV9fbmFtZVwiLFxuICBqb2I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG59KTtcblxuY29uc3QgcG9wdXBQcm9maWxlMSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3BvcHVwLXByb2ZpbGVcIiwgKGlucHV0cykgPT4ge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyh7IG5hbWU6IGlucHV0cy5uYW1lLCBhYm91dG1lOiBpbnB1dHMuYWJvdXRtZSB9KTtcbiAgcG9wdXBQcm9maWxlMS5jbG9zZSgpO1xufSk7XG5cbmNvbnN0IHBvcHVwQWRkSW1hZ2UxID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcGxhY2UtcG9wdXBcIiwgKGlucHV0cykgPT4ge1xuICBjb25zdCBhZGRDYXJkRWxlbWVudCA9IG5ldyBDYXJkKFxuICAgIGlucHV0cy5wbGFjZSxcbiAgICBpbnB1dHMudXJsLFxuICAgIHBvcHVwSW1hZ2UuaGFuZGxlQ2FyZENsaWNrXG4gICk7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gYWRkQ2FyZEVsZW1lbnQuZ2VuZXJhdGVDYXJkKCk7XG4gIHBvcHVwQWRkSW1hZ2UxLmNsb3NlKCk7XG4gIGVsZW1lbnRDb250YWluZGVyLnByZXBlbmQoY2FyZEVsZW1lbnQpO1xufSk7XG5cbnByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wdXBQcm9maWxlMS5vcGVuKCk7XG4gIHZhbGlkYXRpb25Gb3JtKCk7XG4gIHRvZ2dsZUJ1dHRvbkZvcm0oKTtcbiAgY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICAgIHVzZXI6IFwiLnByb2ZpbGVfX25hbWVcIixcbiAgICBqb2I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG4gIH0pO1xuXG4gIGNvbnN0IHVzZXJWYWx1ZXMgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBmb3JtSW5wdXROYW1lLnZhbHVlID0gdXNlclZhbHVlcy5uYW1lO1xuICBmb3JtSW5wdXRBYm91dG1lLnZhbHVlID0gdXNlclZhbHVlcy5hYm91dG1lO1xuICByZXNldFZhbGlkYXRpb25Gb3JtKCk7XG59KTtcblxucHJvZmlsZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cEFkZEltYWdlMS5vcGVuKCk7XG4gIHZhbGlkYXRpb25Gb3JtKCk7XG4gIHRvZ2dsZUJ1dHRvbkZvcm0oKTtcbiAgcmVzZXRWYWxpZGF0aW9uRm9ybSgpO1xufSk7XG5cbnBvcHVwUHJvZmlsZTEuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwQWRkSW1hZ2UxLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4iXSwibmFtZXMiOlsiQ2FyZCIsIm5hbWUiLCJsaW5rIiwiaGFuZGxlQ2FyZENsaWNrIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJvcGVuIiwia2V5IiwidmFsdWUiLCJfY2FyZEVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmQiLCJfZ2V0VGVtcGxhdGUiLCJfY2FyZEltYWdlIiwiYWx0IiwiY29uY2F0Iiwic3JjIiwiX2NhcmRUaXRsZSIsInRleHRDb250ZW50IiwiX2J1dHRvbkxpa2VDYXJkIiwiX2J1dHRvbkRlbGV0ZUNhcmQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJfdGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUJ0biIsIl9oYW5kbGVEZWxldGVCdG4iLCJfc2V0UHJvcGVydGllcyIsIl9zZXRFdmVudExpc3RlbmVycyIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsInNldHRpbmdzIiwiX2Zvcm1FbGVtZW50IiwiX3NldHRpbmdzIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvbiIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiYWRkIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImVycm9yTWVzc2FnZSIsIl9lcnJvckVsZW1lbnQiLCJpZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfdGhpczIiLCJTZWN0aW9uIiwiX3JlZiIsImNhcmRDb250YWluZXIiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbSIsImVsZW1lbnQiLCJhcHBlbmQiLCJlbGVtZW50Q29udGFpbmRlciIsImNsb3NlU2hvd0ltYWdlQnV0dG9uIiwicHJvZmlsZUJ1dHRvbiIsInByb2ZpbGVBZGRCdXR0b24iLCJjbG9zZUZvcm1CdXR0b24iLCJmb3JtTGlzdCIsImZvcm1JbnB1dE5hbWUiLCJmb3JtSW5wdXRBYm91dG1lIiwiZm9ybVNlbGVjdG9yIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9vdmVybGF5RWRpdCIsIl9vdmVybGF5QWRkIiwiX292ZXJsYXlJbWFnZSIsImNsb3NlIiwiY2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjQ2xvc2UiLCJQb3B1cFdpdGhGb3JtIiwiX1BvcHVwIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9jYWxsU3VwZXIiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJiaW5kIiwiX2luaGVyaXRzIiwiZm9ybVZhbHVlcyIsImlucHV0IiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImNhbGwiLCJyZXNldCIsIl90aGlzMyIsIlVzZXJJbmZvIiwidXNlciIsImpvYiIsIl91c2VyTmFtZSIsIl91c2VyQWJvdXRtZSIsInVzZXJWYWx1ZXMiLCJhYm91dG1lIiwiX3JlZjIiLCJwb3B1cEltYWdlIiwiUG9wdXBXaXRoSW1hZ2UiLCJfc2hvd0ltYWdlIiwiX3Nob3dTdWJ0aXRsZSIsInNldEV2ZW50TGlzdGVuZXJzIiwiY2FyZExpc3QiLCJjYXJkRWxlbWVudCIsImdlbmVyYXRlQ2FyZCIsImFkZEl0ZW0iLCJ2YWxpZGF0aW9uRm9ybSIsImVuYWJsZVZhbGlkYXRpb24iLCJyZXNldFZhbGlkYXRpb25Gb3JtIiwicmVzZXRWYWxpZGF0aW9uIiwidG9nZ2xlQnV0dG9uRm9ybSIsInVzZXJJbmZvIiwicG9wdXBQcm9maWxlMSIsImlucHV0cyIsInNldFVzZXJJbmZvIiwicG9wdXBBZGRJbWFnZTEiLCJwbGFjZSIsInVybCIsInByZXBlbmQiLCJnZXRVc2VySW5mbyJdLCJzb3VyY2VSb290IjoiIn0=