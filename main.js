!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var r=function(){return e=function e(t,n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._cardTemplate=document.querySelector("#template__elements"),this._card=this._getTemplate(),this._handleLikeCard=r,this._handleUnlikeCard=o,this._handleCardClick=i,this._likes=t.likes,this._owner=t.owner,this._userId=n,this._cardId=t._id,this._handleDeleteCard=a},(n=[{key:"_getTemplate",value:function(){return this._cardTemplate.cloneNode(!0).content.querySelector(".template__element")}},{key:"_setProperties",value:function(){var e=this;this._cardImage=this._card.querySelector(".element__image"),this._cardTitle=this._card.querySelector(".element__text"),this._likeButton=this._card.querySelector(".element__like-button"),this._likeCounter=this._card.querySelector(".element__like-number"),this._likeCounter.textContent=this._likes.length,this._deleteButton=this._card.querySelector(".element__trash-icon"),this._cardImage.src=this._link,this._cardTitle.textContent=this._name,this._cardImage.alt=this._name,this._likes.some((function(t){return t._id===e._userId}))&&this._likeButton.classList.toggle("element__like-button-active"),this._owner._id!==this._userId&&this._deleteButton.remove(),this._card.id="id_".concat(this._cardId)}},{key:"_handleDeleteCard",value:function(){this._card.remove()}},{key:"_changeLikeCounter",value:function(e){this._likes=e,this._likeCounter.textContent=e.length}},{key:"_setEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){e._likes.some((function(t){return t._id===e._userId}))?(e._handleUnlikeCard(e._cardId).then((function(t){e._changeLikeCounter(t.likes)})),e._likeButton.classList.toggle("element__like-button-active")):(e._handleLikeCard(e._cardId).then((function(t){e._changeLikeCounter(t.likes)})),e._likeButton.classList.toggle("element__like-button-active"))})),this._deleteButton.addEventListener("click",(function(){e._handleDeleteCard(e._cardId)})),this._cardImage.addEventListener("click",(function(){e._handleCardClick(e._link,e._name)}))}},{key:"createCard",value:function(){return this._setProperties(),this._setEventListeners(),this._card}}])&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var u=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=n},(t=[{key:"_setEventListeners",value:function(){var e=this;this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))})),this._formElement.addEventListener("reset",(function(){e._toggleButtonState()}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._buttonElement.classList.add(this._config.inactiveButtonClass):this._buttonElement.classList.remove(this._config.inactiveButtonClass)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),n.classList.add(this._config.inputErrorMessageClass),n.textContent=t}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.inputErrorMessageClass),t.textContent=" "}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var f=function(){return e=function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)},(t=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),p=document.querySelector(".popup__close-image"),d=document.querySelectorAll(".popup__close-form"),y=(Array.from(document.querySelectorAll(".popup__edit-form")),document.querySelector("#popup__edit-form")),h=document.querySelector("#popup__input-name"),m=document.querySelector("#popup__input-description"),v=document.querySelector(".profile__name"),_=document.querySelector(".profile__description"),b=document.querySelector(".profile__edit-button"),g=document.querySelector(".profile__avatar"),S=document.querySelector(".popup__form_avatar-profile"),E=document.querySelector(".elements"),k=document.querySelector("#popup__add-form"),w=document.querySelector(".profile__add-button"),C={formSelector:"#popup__edit-form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button-disabled",inputErrorClass:"popup__input_type_error",inputErrorMessageClass:"popup__input_type_error"};function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}function P(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}var L=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._overlayEdit=document.querySelector("#popup-overlay-edit"),this._overlayAdd=document.querySelector("#popup-overlay-add"),this._overlayImage=document.querySelector("#popup-overlay-image"),this._overlayConfirmation=document.querySelector("#popup-overlay-confirmation"),this._overlayAvatar=document.querySelector("#popup-overlay-avatar")},(t=[{key:"handleOpen",value:function(){this._popupElement.classList.add("popup__opened"),this._overlayEdit.classList.add("popup__overlay-opened"),this._overlayAdd.classList.add("popup__overlay-opened"),this._overlayImage.classList.add("popup__overlay-opened"),this._overlayConfirmation.classList.add("popup__overlay-opened"),this._overlayAvatar.classList.add("popup__overlay-opened")}},{key:"handleClose",value:function(){this._popupElement.classList.remove("popup__opened"),this._overlayEdit.classList.remove("popup__overlay-opened"),this._overlayAdd.classList.remove("popup__overlay-opened"),this._overlayImage.classList.remove("popup__overlay-opened"),this._overlayConfirmation.classList.remove("popup__overlay-opened"),this._overlayAvatar.classList.remove("popup__overlay-opened")}},{key:"_handleEscapeKey",value:function(e){"Escape"===e.key&&this.handleClose()}},{key:"setEventListeners",value:function(){var e=this;this._overlayEdit.addEventListener("click",(function(){e.handleClose()})),this._overlayAdd.addEventListener("click",(function(){e.handleClose()})),this._overlayImage.addEventListener("click",(function(){e.handleClose()})),this._overlayConfirmation.addEventListener("click",(function(){e.handleClose()})),this._overlayAvatar.addEventListener("click",(function(){e.handleClose()})),d.forEach((function(t){t.addEventListener("click",(function(){e.handleClose()}))})),p.addEventListener("click",(function(){e.handleClose()})),document.addEventListener("keydown",(function(t){e._handleEscapeKey(t)}))}}])&&j(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function T(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}function B(e,t,n){return t=A(t),function(e,t){if(t&&("object"==I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,U()?Reflect.construct(t,n||[],A(e).constructor):t.apply(e,n))}function U(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U=function(){return!!e})()}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},x.apply(null,arguments)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}var D=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=B(this,t,[e])).handleFormSubmit=n,r._formElement=r._popupElement.querySelector(".popup__edit-form"),r._inputList=Array.from(r._formElement.querySelectorAll(".popup__input")),r._getInputValues=r._getInputValues.bind(r),r._formButton=r._popupElement.querySelector(".popup__save-button"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(t,e),n=t,r=[{key:"_getInputValues",value:function(){var e=this;return this.formValues={},this._inputList.forEach((function(t){e.formValues[t.name]=t.value})),this.formValues}},{key:"handleOpen",value:function(e,n){this._formButton.textContent="Guardar",x(A(t.prototype),"handleOpen",this).call(this),this._inputList[0].value=e||"",this._inputList[1]&&(this._inputList[1].value=n||"")}},{key:"handleClose",value:function(){x(A(t.prototype),"handleClose",this).call(this),this._formElement.reset()}},{key:"setEventListeners",value:function(){var e=this;x(A(t.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._formButton.textContent="Guardando...",e.handleFormSubmit(e._getInputValues(),(function(){return e.handleClose()}))}))}}],r&&q(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(L);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G(r.key),r)}}function G(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:t+""}var M=function(){return e=function e(t){var n=t.nameSelector,r=t.descriptionSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._description=document.querySelector(r),this._avatar=document.querySelector(o)},(t=[{key:"getUserInfo",value:function(){return{userName:this._name.textContent,userDescription:this._description.textContent,userAvatar:this._avatar.src}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._description.textContent=e.about,e.avatar&&(this._avatar.src=e.avatar),e._id&&(this._userId=e._id)}}])&&N(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H(r.key),r)}}function H(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}function K(e,t,n){return t=W(t),function(e,t){if(t&&("object"==F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,z()?Reflect.construct(t,n||[],W(e).constructor):t.apply(e,n))}function z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(z=function(){return!!e})()}function Q(){return Q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=W(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Q.apply(null,arguments)}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}var Y=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=K(this,t,[e])).handleOpen=n.handleOpen.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(t,e),n=t,(r=[{key:"handleOpen",value:function(e,n){Q(W(t.prototype),"handleOpen",this).call(this),this._image=document.querySelector(".popup__element-image"),this._title=document.querySelector(".popup__element-title"),this._image.alt="Fotografia de ".concat(n),this._image.src=e,this._title.textContent=n}}])&&J(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(L);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ee(r.key),r)}}function ee(e){var t=function(e,t){if("object"!=Z(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Z(t)?t:t+""}function te(e,t,n){return t=oe(t),function(e,t){if(t&&("object"==Z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ne()?Reflect.construct(t,n||[],oe(e).constructor):t.apply(e,n))}function ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ne=function(){return!!e})()}function re(){return re="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=oe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},re.apply(null,arguments)}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}function ie(e,t){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ie(e,t)}var ae=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=te(this,t,[e]))._handleConfirmation=n,r._formElement=r._popupElement.querySelector(".popup__form_delete-confirmation"),r.cardId="",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}(t,e),n=t,r=[{key:"setEventListeners",value:function(){var e=this;re(oe(t.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleConfirmation(e.cardId)}))}},{key:"handleOpen",value:function(e){this.cardId=e,re(oe(t.prototype),"handleOpen",this).call(this)}},{key:"handleClose",value:function(){re(oe(t.prototype),"handleClose",this).call(this)}}],r&&$(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(L);function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,le(r.key),r)}}function le(e){var t=function(e,t){if("object"!=ue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ue(t)?t:t+""}var se=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers},(t=[{key:"getInitialCards",value:function(){return fetch("".concat(this.baseUrl,"/cards"),{method:"GET",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"getUserInfo",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{method:"GET",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"editProfile",value:function(e){return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"editAvatarProfile",value:function(e){return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e.avatarLink})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"addCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"addLike",value:function(e){return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"removeLike",value:function(e){return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}}])&&ce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();h.value=v.textContent,m.value=_.textContent;var fe=new M({nameSelector:".profile__name",descriptionSelector:".profile__description",avatarSelector:".profile__avatar-image"}),pe=new se({baseUrl:"https://around.nomoreparties.co/v1/web_es_11",headers:{authorization:"6bb9691a-4f67-46d0-9c5a-49bb45cb7185","Content-Type":"application/json"}});pe.getUserInfo().then((function(e){fe.setUserInfo(e),pe.getInitialCards().then((function(e){var t=new f({items:e,renderer:function(e){var n=new r(e,fe._userId,(function(e){return pe.addLike(e)}),(function(e){return pe.removeLike(e)}),ye.handleOpen,(function(){ve.handleOpen(e._id)})).createCard();t.addItem(n)}},".elements");t.renderItems()}))}));var de=new D("#place-popup",(function(e,t){pe.addCard(e).then((function(e){var n=new r(e,fe._userId,(function(e){return pe.addLike(e)}),(function(e){return pe.removeLike(e)}),ye.handleOpen,(function(){ve.handleOpen(e._id)})).createCard();E.prepend(n),de.handleClose,t()}))}));de.setEventListeners();var ye=new Y("#image-popup");ye.setEventListeners();var he=new D("#popup-profile",(function(e,t){pe.editProfile(e).then((function(e){fe.setUserInfo(e),he.handleClose()}))}));he.setEventListeners();var me=new D("#popup-avatar-profile",(function(e){pe.editAvatarProfile(e).then((function(e){fe.setUserInfo(e),me.handleClose()}))}));me.setEventListeners();var ve=new ae("#popup-delete-confirmation",(function(e){pe.deleteCard(e).then((function(){ve.handleClose(),document.querySelector("#id_".concat(e)).remove()}))}));ve.setEventListeners(),b.addEventListener("click",(function(){he.handleOpen(v.textContent,_.textContent),new u(C,y).enableValidation()})),g.addEventListener("click",(function(){me.handleOpen(),new u(C,S).enableValidation()})),w.addEventListener("click",(function(){de.handleOpen(),new u(C,k).enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQWMsa0JBQWtCLFNBQUM2RSxFQUFRQyxHQUNoRWpCLEdBQUl1QixZQUFZUCxHQUFRbEosTUFBSyxTQUFDcUksR0FDNUJKLEdBQVNLLFlBQVlELEdBQ3JCbUIsR0FBYXRGLGFBRWYsR0FDRixJQUNBc0YsR0FBYUQsb0JBRWIsSUFBTUcsR0FBcUIsSUFBSXJGLEVBQzdCLHlCQUNBLFNBQUM2RSxHQUNDaEIsR0FBSXlCLGtCQUFrQlQsR0FBUWxKLE1BQUssU0FBQ3FJLEdBQ2xDSixHQUFTSyxZQUFZRCxHQUNyQnFCLEdBQW1CeEYsYUFDckIsR0FDRixJQUVGd0YsR0FBbUJILG9CQUVuQixJQUFNVixHQUF3QixJQUFJcEMsR0FDaEMsOEJBQ0EsU0FBQ21ELEdBQ0MxQixHQUFJMkIsV0FBV0QsR0FBYzVKLE1BQUssV0FDaEM2SSxHQUFzQjNFLGNBQ1R6RyxTQUFTQyxjQUFjLE9BQURrQyxPQUFRZ0ssSUFDdENsSyxRQUNQLEdBQ0YsSUFFRm1KLEdBQXNCVSxvQkFFdEJyRyxFQUFrQm5ELGlCQUFpQixTQUFTLFdBQzFDeUosR0FBYWxELFdBQ1h0RCxFQUFZL0QsWUFDWmdFLEVBQW1CaEUsYUFFUSxJQUFJb0IsRUFBY0MsRUFBUXVDLEdBQ2xDaUgsa0JBQ3ZCLElBRUEzRyxFQUF1QnBELGlCQUFpQixTQUFTLFdBQy9DMkosR0FBbUJwRCxhQUNnQixJQUFJakcsRUFDckNDLEVBQ0E4QyxHQUV5QjBHLGtCQUM3QixJQUVBdkcsRUFBZXhELGlCQUFpQixTQUFTLFdBQ3ZDa0osR0FBVzNDLGFBQ2dCLElBQUlqRyxFQUFjQyxFQUFRZ0QsR0FDbEN3RyxrQkFDckIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL3V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvcGFnZS9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgY2FyZERhdGEsXG4gICAgdXNlcklkLFxuICAgIGhhbmRsZUxpa2VDYXJkLFxuICAgIGhhbmRsZVVubGlrZUNhcmQsXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUNhcmRcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IGNhcmREYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGNhcmREYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0ZW1wbGF0ZV9fZWxlbWVudHNcIik7XG4gICAgdGhpcy5fY2FyZCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNhcmQgPSBoYW5kbGVMaWtlQ2FyZDtcbiAgICB0aGlzLl9oYW5kbGVVbmxpa2VDYXJkID0gaGFuZGxlVW5saWtlQ2FyZDtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5fbGlrZXMgPSBjYXJkRGF0YS5saWtlcztcbiAgICB0aGlzLl9vd25lciA9IGNhcmREYXRhLm93bmVyO1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICB0aGlzLl9jYXJkSWQgPSBjYXJkRGF0YS5faWQ7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZURlbGV0ZUNhcmQ7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRUZW1wbGF0ZVxuICAgICAgLmNsb25lTm9kZSh0cnVlKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi50ZW1wbGF0ZV9fZWxlbWVudFwiKTtcbiAgfVxuXG4gIF9zZXRQcm9wZXJ0aWVzKCkge1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fdGV4dFwiKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2UtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2xpa2VDb3VudGVyID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2UtbnVtYmVyXCIpO1xuICAgIHRoaXMuX2xpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190cmFzaC1pY29uXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgaWYgKHRoaXMuX2xpa2VzLnNvbWUoKGl0ZW0pID0+IGl0ZW0uX2lkID09PSB0aGlzLl91c2VySWQpKSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50X19saWtlLWJ1dHRvbi1hY3RpdmVcIik7XG4gICAgfVxuICAgIGlmICh0aGlzLl9vd25lci5faWQgIT09IHRoaXMuX3VzZXJJZCkge1xuICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLnJlbW92ZSgpO1xuICAgIH1cbiAgICB0aGlzLl9jYXJkLmlkID0gYGlkXyR7dGhpcy5fY2FyZElkfWA7XG4gIH1cblxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkLnJlbW92ZSgpO1xuICB9XG5cbiAgX2NoYW5nZUxpa2VDb3VudGVyKG5ld0FycmF5TGlrZXMpIHtcbiAgICB0aGlzLl9saWtlcyA9IG5ld0FycmF5TGlrZXM7XG4gICAgdGhpcy5fbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSBuZXdBcnJheUxpa2VzLmxlbmd0aDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5fbGlrZXMuc29tZSgoaXRlbSkgPT4gaXRlbS5faWQgPT09IHRoaXMuX3VzZXJJZCkpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlVW5saWtlQ2FyZCh0aGlzLl9jYXJkSWQpLnRoZW4oKGNhcmRXaXRoTGlrZSkgPT4ge1xuICAgICAgICAgIHRoaXMuX2NoYW5nZUxpa2VDb3VudGVyKGNhcmRXaXRoTGlrZS5saWtlcyk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50X19saWtlLWJ1dHRvbi1hY3RpdmVcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQ2FyZCh0aGlzLl9jYXJkSWQpLnRoZW4oKGNhcmRXaXRoTGlrZSkgPT4ge1xuICAgICAgICAgIHRoaXMuX2NoYW5nZUxpa2VDb3VudGVyKGNhcmRXaXRoTGlrZS5saWtlcyk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50X19saWtlLWJ1dHRvbi1hY3RpdmVcIik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKHRoaXMuX2NhcmRJZCk7XG4gICAgfSk7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbGluaywgdGhpcy5fbmFtZSk7XG4gICAgfSk7XG4gIH1cblxuICBjcmVhdGVDYXJkKCkge1xuICAgIHRoaXMuX3NldFByb3BlcnRpZXMoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsICgpID0+IHtcbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgfSk7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH1cbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JNZXNzYWdlQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvck1lc3NhZ2VDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCIgXCI7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY2FyZENvbnRhaW5lcikge1xuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZENvbnRhaW5lcik7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiY29uc3QgY2xvc2VTaG93SW1hZ2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1pbWFnZVwiKTtcbmNvbnN0IGNsb3NlRm9ybUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2Nsb3NlLWZvcm1cIik7XG5jb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fZWRpdC1mb3JtXCIpKTtcbmNvbnN0IHBvcHVwUHJvZmlsZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwX19lZGl0LWZvcm1cIik7XG5jb25zdCBpbnB1dE5hbWVVc2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cF9faW5wdXQtbmFtZVwiKTtcbmNvbnN0IGlucHV0QWJvdXRVc2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cF9faW5wdXQtZGVzY3JpcHRpb25cIik7XG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5jb25zdCBwcm9maWxlQXZhdGFyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XG5jb25zdCBwcm9maWxlQXZhdGFyRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1fYXZhdGFyLXByb2ZpbGVcIik7XG5jb25zdCBjYXJkc1NlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzXCIpO1xuY29uc3QgcG9wdXBDYXJkc0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwX19hZGQtZm9ybVwiKTtcbmNvbnN0IGFkZENhcmRzQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiI3BvcHVwX19lZGl0LWZvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbi1kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgaW5wdXRFcnJvck1lc3NhZ2VDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxufTtcbmV4cG9ydCB7XG4gIGNsb3NlU2hvd0ltYWdlQnV0dG9uLFxuICBjbG9zZUZvcm1CdXR0b24sXG4gIGZvcm1MaXN0LFxuICBwb3B1cFByb2ZpbGVGb3JtLFxuICBpbnB1dE5hbWVVc2VyLFxuICBpbnB1dEFib3V0VXNlcixcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcbiAgcHJvZmlsZUF2YXRhckNvbnRhaW5lcixcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIGNhcmRzU2VjdGlvbixcbiAgcG9wdXBDYXJkc0Zvcm0sXG4gIGFkZENhcmRzQnV0dG9uLFxuICBwcm9maWxlQXZhdGFyRm9ybSxcbiAgY29uZmlnLFxufTtcbiIsImltcG9ydCB7IGNsb3NlRm9ybUJ1dHRvbiwgY2xvc2VTaG93SW1hZ2VCdXR0b24gfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX292ZXJsYXlFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1vdmVybGF5LWVkaXRcIik7XG4gICAgdGhpcy5fb3ZlcmxheUFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtb3ZlcmxheS1hZGRcIik7XG4gICAgdGhpcy5fb3ZlcmxheUltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1vdmVybGF5LWltYWdlXCIpO1xuICAgIHRoaXMuX292ZXJsYXlDb25maXJtYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIjcG9wdXAtb3ZlcmxheS1jb25maXJtYXRpb25cIlxuICAgICk7XG4gICAgdGhpcy5fb3ZlcmxheUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtb3ZlcmxheS1hdmF0YXJcIik7XG4gIH1cbiAgaGFuZGxlT3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX19vcGVuZWRcIik7XG4gICAgdGhpcy5fb3ZlcmxheUVkaXQuY2xhc3NMaXN0LmFkZChcInBvcHVwX19vdmVybGF5LW9wZW5lZFwiKTtcbiAgICB0aGlzLl9vdmVybGF5QWRkLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9fb3ZlcmxheS1vcGVuZWRcIik7XG4gICAgdGhpcy5fb3ZlcmxheUltYWdlLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9fb3ZlcmxheS1vcGVuZWRcIik7XG4gICAgdGhpcy5fb3ZlcmxheUNvbmZpcm1hdGlvbi5jbGFzc0xpc3QuYWRkKFwicG9wdXBfX292ZXJsYXktb3BlbmVkXCIpO1xuICAgIHRoaXMuX292ZXJsYXlBdmF0YXIuY2xhc3NMaXN0LmFkZChcInBvcHVwX19vdmVybGF5LW9wZW5lZFwiKTtcbiAgfVxuICBoYW5kbGVDbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19vcGVuZWRcIik7XG4gICAgdGhpcy5fb3ZlcmxheUVkaXQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19vdmVybGF5LW9wZW5lZFwiKTtcbiAgICB0aGlzLl9vdmVybGF5QWRkLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9fb3ZlcmxheS1vcGVuZWRcIik7XG4gICAgdGhpcy5fb3ZlcmxheUltYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9fb3ZlcmxheS1vcGVuZWRcIik7XG4gICAgdGhpcy5fb3ZlcmxheUNvbmZpcm1hdGlvbi5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX292ZXJsYXktb3BlbmVkXCIpO1xuICAgIHRoaXMuX292ZXJsYXlBdmF0YXIuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19vdmVybGF5LW9wZW5lZFwiKTtcbiAgfVxuICBfaGFuZGxlRXNjYXBlS2V5KGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmhhbmRsZUNsb3NlKCk7XG4gICAgfVxuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX292ZXJsYXlFZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZUNsb3NlKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fb3ZlcmxheUFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5oYW5kbGVDbG9zZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuX292ZXJsYXlJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5oYW5kbGVDbG9zZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuX292ZXJsYXlDb25maXJtYXRpb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuaGFuZGxlQ2xvc2UoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9vdmVybGF5QXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZUNsb3NlKCk7XG4gICAgfSk7XG4gICAgY2xvc2VGb3JtQnV0dG9uLmZvckVhY2goKGNsb3NlQnV0dG9uKSA9PiB7XG4gICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmhhbmRsZUNsb3NlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBjbG9zZVNob3dJbWFnZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5oYW5kbGVDbG9zZSgpO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldnQpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUVzY2FwZUtleShldnQpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuaGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZWRpdC1mb3JtXCIpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKVxuICAgICk7XG4gICAgdGhpcy5fZ2V0SW5wdXRWYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2Zvcm1CdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc2F2ZS1idXR0b25cIik7XG4gIH1cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5mb3JtVmFsdWVzO1xuICB9XG4gIGhhbmRsZU9wZW4oY29udGVudEZpcnN0SW5wdXQsIGNvbnRlbnRTZWNvbmRJbnB1dCkge1xuICAgIHRoaXMuX2Zvcm1CdXR0b24udGV4dENvbnRlbnQgPSBcIkd1YXJkYXJcIjtcbiAgICBzdXBlci5oYW5kbGVPcGVuKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0WzBdLnZhbHVlID0gY29udGVudEZpcnN0SW5wdXQgfHwgXCJcIjtcbiAgICBpZiAodGhpcy5faW5wdXRMaXN0WzFdKSB7XG4gICAgICB0aGlzLl9pbnB1dExpc3RbMV0udmFsdWUgPSBjb250ZW50U2Vjb25kSW5wdXQgfHwgXCJcIjtcbiAgICB9XG4gIH1cbiAgaGFuZGxlQ2xvc2UoKSB7XG4gICAgc3VwZXIuaGFuZGxlQ2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9mb3JtQnV0dG9uLnRleHRDb250ZW50ID0gXCJHdWFyZGFuZG8uLi5cIjtcbiAgICAgIGNvbnN0IGNsb3NlID0gKCkgPT4gdGhpcy5oYW5kbGVDbG9zZSgpO1xuICAgICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCksIGNsb3NlKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgZGVzY3JpcHRpb25TZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGRlc2NyaXB0aW9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXJOYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgdXNlckRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcbiAgICAgIHVzZXJBdmF0YXI6IHRoaXMuX2F2YXRhci5zcmMsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKGRhdGEpIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcbiAgICBpZiAoZGF0YS5hdmF0YXIpIHtcbiAgICAgIHRoaXMuX2F2YXRhci5zcmMgPSBkYXRhLmF2YXRhcjtcbiAgICB9XG4gICAgaWYgKGRhdGEuX2lkKSB7XG4gICAgICB0aGlzLl91c2VySWQgPSBkYXRhLl9pZDtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuaGFuZGxlT3BlbiA9IHRoaXMuaGFuZGxlT3Blbi5iaW5kKHRoaXMpO1xuICB9XG4gIGhhbmRsZU9wZW4obGluaywgbmFtZSkge1xuICAgIHN1cGVyLmhhbmRsZU9wZW4oKTtcblxuICAgIHRoaXMuX2ltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZWxlbWVudC1pbWFnZVwiKTtcbiAgICB0aGlzLl90aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2VsZW1lbnQtdGl0bGVcIik7XG5cbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBgRm90b2dyYWZpYSBkZSAke25hbWV9YDtcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlQ29uZmlybWF0aW9uKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlQ29uZmlybWF0aW9uID0gaGFuZGxlQ29uZmlybWF0aW9uO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5wb3B1cF9fZm9ybV9kZWxldGUtY29uZmlybWF0aW9uXCJcbiAgICApO1xuICAgIHRoaXMuY2FyZElkID0gXCJcIjtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlQ29uZmlybWF0aW9uKHRoaXMuY2FyZElkKTtcbiAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZU9wZW4oY2FyZElkKSB7XG4gICAgdGhpcy5jYXJkSWQgPSBjYXJkSWQ7XG4gICAgc3VwZXIuaGFuZGxlT3BlbigpO1xuICB9XG5cbiAgaGFuZGxlQ2xvc2UoKSB7XG4gICAgc3VwZXIuaGFuZGxlQ2xvc2UoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcbiAgICB0aGlzLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIGVkaXRQcm9maWxlKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgIGFib3V0OiBkYXRhLmFib3V0LFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBlZGl0QXZhdGFyUHJvZmlsZShkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXJMaW5rLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBhZGRDYXJkKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgbGluazogZGF0YS5saW5rLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIGFkZExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCB7XG4gIHBvcHVwUHJvZmlsZUZvcm0sXG4gIGlucHV0TmFtZVVzZXIsXG4gIGlucHV0QWJvdXRVc2VyLFxuICBwcm9maWxlTmFtZSxcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxuICBwcm9maWxlRWRpdEJ1dHRvbixcbiAgY2FyZHNTZWN0aW9uLFxuICBwb3B1cENhcmRzRm9ybSxcbiAgYWRkQ2FyZHNCdXR0b24sXG4gIHByb2ZpbGVBdmF0YXJDb250YWluZXIsXG4gIHByb2ZpbGVBdmF0YXJGb3JtLFxuICBjb25maWcsXG59IGZyb20gXCIuLi9jb21wb25lbnRzL3V0aWxzLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuXG5pbnB1dE5hbWVVc2VyLnZhbHVlID0gcHJvZmlsZU5hbWUudGV4dENvbnRlbnQ7XG5pbnB1dEFib3V0VXNlci52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcbiAgZGVzY3JpcHRpb25TZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcbiAgYXZhdGFyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2F2YXRhci1pbWFnZVwiLFxufSk7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViX2VzXzExXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjZiYjk2OTFhLTRmNjctNDZkMC05YzVhLTQ5YmI0NWNiNzE4NVwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmFwaS5nZXRVc2VySW5mbygpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXN1bHQpO1xuICBhcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcbiAgICAgIHtcbiAgICAgICAgaXRlbXM6IHJlc3VsdCxcbiAgICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgICAgICAgICAgaXRlbSxcbiAgICAgICAgICAgIHVzZXJJbmZvLl91c2VySWQsXG4gICAgICAgICAgICAoY2FyZElkKSA9PiBhcGkuYWRkTGlrZShjYXJkSWQpLFxuICAgICAgICAgICAgKGNhcmRJZCkgPT4gYXBpLnJlbW92ZUxpa2UoY2FyZElkKSxcbiAgICAgICAgICAgIHBvcHVwUGhvdG8uaGFuZGxlT3BlbixcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgcG9wdXBXaXRoQ29uZmlybWF0aW9uLmhhbmRsZU9wZW4oaXRlbS5faWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmNyZWF0ZUNhcmQoKTtcbiAgICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBcIi5lbGVtZW50c1wiXG4gICAgKTtcbiAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xuICB9KTtcbn0pO1xuXG5jb25zdCBwb3B1cENhcmRzID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcGxhY2UtcG9wdXBcIiwgKGlucHV0cywgb25DbG9zZSkgPT4ge1xuICBhcGkuYWRkQ2FyZChpbnB1dHMpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChcbiAgICAgIHJlc3VsdCxcbiAgICAgIHVzZXJJbmZvLl91c2VySWQsXG4gICAgICAoY2FyZElkKSA9PiBhcGkuYWRkTGlrZShjYXJkSWQpLFxuICAgICAgKGNhcmRJZCkgPT4gYXBpLnJlbW92ZUxpa2UoY2FyZElkKSxcbiAgICAgIHBvcHVwUGhvdG8uaGFuZGxlT3BlbixcbiAgICAgICgpID0+IHtcbiAgICAgICAgcG9wdXBXaXRoQ29uZmlybWF0aW9uLmhhbmRsZU9wZW4ocmVzdWx0Ll9pZCk7XG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCBuZXdDYXJkRWxlbWVudCA9IG5ld0NhcmQuY3JlYXRlQ2FyZCgpO1xuICAgIGNhcmRzU2VjdGlvbi5wcmVwZW5kKG5ld0NhcmRFbGVtZW50KTtcbiAgICBwb3B1cENhcmRzLmhhbmRsZUNsb3NlO1xuICAgIG9uQ2xvc2UoKTtcbiAgfSk7XG59KTtcbnBvcHVwQ2FyZHMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBQaG90byA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNpbWFnZS1wb3B1cFwiKTtcbnBvcHVwUGhvdG8uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcG9wdXAtcHJvZmlsZVwiLCAoaW5wdXRzLCBvbkNsb3NlKSA9PiB7XG4gIGFwaS5lZGl0UHJvZmlsZShpbnB1dHMpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlc3VsdCk7XG4gICAgcG9wdXBQcm9maWxlLmhhbmRsZUNsb3NlKCk7XG4gICAgLy9vbkNsb3NlKCk7XG4gIH0pO1xufSk7XG5wb3B1cFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBBdmF0YXJQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3BvcHVwLWF2YXRhci1wcm9maWxlXCIsXG4gIChpbnB1dHMpID0+IHtcbiAgICBhcGkuZWRpdEF2YXRhclByb2ZpbGUoaW5wdXRzKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlc3VsdCk7XG4gICAgICBwb3B1cEF2YXRhclByb2ZpbGUuaGFuZGxlQ2xvc2UoKTtcbiAgICB9KTtcbiAgfVxuKTtcbnBvcHVwQXZhdGFyUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cFdpdGhDb25maXJtYXRpb24gPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFxuICBcIiNwb3B1cC1kZWxldGUtY29uZmlybWF0aW9uXCIsXG4gIChjYXJkVG9EZWxldGUpID0+IHtcbiAgICBhcGkuZGVsZXRlQ2FyZChjYXJkVG9EZWxldGUpLnRoZW4oKCkgPT4ge1xuICAgICAgcG9wdXBXaXRoQ29uZmlybWF0aW9uLmhhbmRsZUNsb3NlKCk7XG4gICAgICBjb25zdCBjYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2lkXyR7Y2FyZFRvRGVsZXRlfWApO1xuICAgICAgY2FyZC5yZW1vdmUoKTtcbiAgICB9KTtcbiAgfVxuKTtcbnBvcHVwV2l0aENvbmZpcm1hdGlvbi5zZXRFdmVudExpc3RlbmVycygpO1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cFByb2ZpbGUuaGFuZGxlT3BlbihcbiAgICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCxcbiAgICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnRcbiAgKTtcbiAgY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIHBvcHVwUHJvZmlsZUZvcm0pO1xuICBwcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG59KTtcblxucHJvZmlsZUF2YXRhckNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cEF2YXRhclByb2ZpbGUuaGFuZGxlT3BlbigpO1xuICBjb25zdCBhdmF0YXJQcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICAgIGNvbmZpZyxcbiAgICBwcm9maWxlQXZhdGFyRm9ybVxuICApO1xuICBhdmF0YXJQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG59KTtcblxuYWRkQ2FyZHNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wdXBDYXJkcy5oYW5kbGVPcGVuKCk7XG4gIGNvbnN0IGNhcmRzRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcG9wdXBDYXJkc0Zvcm0pO1xuICBjYXJkc0Zvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xufSk7Il0sIm5hbWVzIjpbIkNhcmQiLCJjYXJkRGF0YSIsInVzZXJJZCIsImhhbmRsZUxpa2VDYXJkIiwiaGFuZGxlVW5saWtlQ2FyZCIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNhcmQiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl9jYXJkIiwiX2dldFRlbXBsYXRlIiwiX2hhbmRsZUxpa2VDYXJkIiwiX2hhbmRsZVVubGlrZUNhcmQiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2xpa2VzIiwibGlrZXMiLCJfb3duZXIiLCJvd25lciIsIl91c2VySWQiLCJfY2FyZElkIiwiX2lkIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJrZXkiLCJ2YWx1ZSIsImNsb25lTm9kZSIsImNvbnRlbnQiLCJfdGhpcyIsIl9jYXJkSW1hZ2UiLCJfY2FyZFRpdGxlIiwiX2xpa2VCdXR0b24iLCJfbGlrZUNvdW50ZXIiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsIl9kZWxldGVCdXR0b24iLCJzcmMiLCJhbHQiLCJzb21lIiwiaXRlbSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsImlkIiwiY29uY2F0IiwibmV3QXJyYXlMaWtlcyIsIl90aGlzMiIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0aGVuIiwiY2FyZFdpdGhMaWtlIiwiX2NoYW5nZUxpa2VDb3VudGVyIiwiX3NldFByb3BlcnRpZXMiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfY29uZmlnIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2hhc0ludmFsaWRJbnB1dCIsImFkZCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvck1lc3NhZ2VDbGFzcyIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiU2VjdGlvbiIsIl9yZWYiLCJjYXJkQ29udGFpbmVyIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJhcHBlbmQiLCJjbG9zZVNob3dJbWFnZUJ1dHRvbiIsImNsb3NlRm9ybUJ1dHRvbiIsInBvcHVwUHJvZmlsZUZvcm0iLCJpbnB1dE5hbWVVc2VyIiwiaW5wdXRBYm91dFVzZXIiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUF2YXRhckNvbnRhaW5lciIsInByb2ZpbGVBdmF0YXJGb3JtIiwiY2FyZHNTZWN0aW9uIiwicG9wdXBDYXJkc0Zvcm0iLCJhZGRDYXJkc0J1dHRvbiIsImZvcm1TZWxlY3RvciIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfb3ZlcmxheUVkaXQiLCJfb3ZlcmxheUFkZCIsIl9vdmVybGF5SW1hZ2UiLCJfb3ZlcmxheUNvbmZpcm1hdGlvbiIsIl9vdmVybGF5QXZhdGFyIiwiZXZ0IiwiaGFuZGxlQ2xvc2UiLCJjbG9zZUJ1dHRvbiIsIl9oYW5kbGVFc2NhcGVLZXkiLCJQb3B1cFdpdGhGb3JtIiwiX1BvcHVwIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9jYWxsU3VwZXIiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJiaW5kIiwiX2Zvcm1CdXR0b24iLCJfaW5oZXJpdHMiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJjb250ZW50Rmlyc3RJbnB1dCIsImNvbnRlbnRTZWNvbmRJbnB1dCIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJjYWxsIiwicmVzZXQiLCJfdGhpczMiLCJlIiwicHJldmVudERlZmF1bHQiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImRlc2NyaXB0aW9uU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9kZXNjcmlwdGlvbiIsIl9hdmF0YXIiLCJ1c2VyTmFtZSIsInVzZXJEZXNjcmlwdGlvbiIsInVzZXJBdmF0YXIiLCJkYXRhIiwiYWJvdXQiLCJhdmF0YXIiLCJQb3B1cFdpdGhJbWFnZSIsImhhbmRsZU9wZW4iLCJfaW1hZ2UiLCJfdGl0bGUiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJoYW5kbGVDb25maXJtYXRpb24iLCJfaGFuZGxlQ29uZmlybWF0aW9uIiwiY2FyZElkIiwiQXBpIiwib3B0aW9ucyIsImJhc2VVcmwiLCJoZWFkZXJzIiwiZmV0Y2giLCJtZXRob2QiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhdmF0YXJMaW5rIiwidXNlckluZm8iLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiZ2V0VXNlckluZm8iLCJyZXN1bHQiLCJzZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsImNhcmRMaXN0IiwiY2FyZEVsZW1lbnQiLCJhZGRMaWtlIiwicmVtb3ZlTGlrZSIsInBvcHVwUGhvdG8iLCJwb3B1cFdpdGhDb25maXJtYXRpb24iLCJjcmVhdGVDYXJkIiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwicG9wdXBDYXJkcyIsImlucHV0cyIsIm9uQ2xvc2UiLCJhZGRDYXJkIiwibmV3Q2FyZEVsZW1lbnQiLCJwcmVwZW5kIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cFByb2ZpbGUiLCJlZGl0UHJvZmlsZSIsInBvcHVwQXZhdGFyUHJvZmlsZSIsImVkaXRBdmF0YXJQcm9maWxlIiwiY2FyZFRvRGVsZXRlIiwiZGVsZXRlQ2FyZCIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9